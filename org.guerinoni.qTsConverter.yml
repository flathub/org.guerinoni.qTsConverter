app-id: org.guerinoni.qTsConverter
runtime: org.kde.Platform
runtime-version: 5.15-25.08
sdk: org.kde.Sdk
command: qTsConverter
finish-args:
  - --device=dri
  - --socket=wayland
  - --socket=fallback-x11
  - --share=ipc
modules:
  - name: qTsConverter
    config-opts:
      - -DCMAKE_INSTALL_PREFIX=/app
      - -DCMAKE_BUILD_TYPE=Release
      - -DCMAKE_POLICY_VERSION_MINIMUM=3.5
    buildsystem: cmake
    sources:
      - type: git
        url: https://github.com/guerinoni/qTsConverter
        tag: 4.5.0
        commit: cc0be910846c2e6ec254111555455394c562179c
      - type: patch
        path: fix-appdata.patch
    post-install:
      # workaround for non-png-icon-in-hicolor-size-folder lint error
      - mkdir -p /app/share/icons/hicolor/scalable/apps
      - mv /app/share/icons/hicolor/512x512/apps/${FLATPAK_ID}.svg /app/share/icons/hicolor/scalable/apps/${FLATPAK_ID}.svg
      - find /app/share/icons/hicolor -type f -not -path "*scalable*" -not -path "*actions*" -name "*.svg" -delete
